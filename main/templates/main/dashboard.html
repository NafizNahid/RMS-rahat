{% extends 'main/base.html' %}

{% load static %}

{% block title %} Dashboard {% endblock %}

{% block css %} 
.semester-circle 
{
  border-radius: 50%;
  height: 25px;
  width: 25px;
}
{% endblock %}

{% block body %}
  
{% if new_teacher_info %}
<!-- New Teacher Login Credentials Modal -->
<div class="modal fade" id="LoginInfoModal" tabindex="-1" aria-labelledby="LoginInfoModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="LoginInfoModalLabel">Remember these credentials to login later</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <ul class="list-group">
          <li class="list-group-item"><b>Email: </b>{{new_teacher_info.email}}</li>
          <li class="list-group-item"><b>Username<small class="text-warning">(auto generated)</small>: </b>{{new_teacher_info.username}}</li>
          <li class="list-group-item"><b>Password<small class="text-warning">(auto generated)</small>: </b>{{new_teacher_info.password}}</li>
        </ul>
      </div>
    </div>
  </div>
</div>
{% endif %}
  

<!-- Add batch modal -->
<div class="modal fade" id="AddBatchModal" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="AddBatchLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="AddBatchLabel">Add New Batch</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form method="post" class="p-3"> {% csrf_token %}  
          <input type="hidden" name="form_name" value="add_batch_form">
          <div class="d-flex justify-content-between">
            <div class="form-group">
              <label class="form-label">Batch No</label>
              <input type="text" name="batch_no" class="form-control">
            </div>
            <div class="form-group">
              <label class="form-label">Session</label>
              <input type="text" name="session" class="form-control">
            </div>
          </div>
          <button type="submit" class="btn btn-primary col-3 mt-2">Add</button>
        </form>
      </div>
    </div>
  </div>
</div>



<!-- Add teacher modal -->
    

<!-- main body -->
<section class="row mx-5 my-3">
  <div class="col-7">
    <div class="d-flex justify-content-center mt-5 mb-3">
      <h4 class="bg-primary text-center text-white p-3 rounded-pill col-2">Batches</h4>
    </div>

    {% if request.user.is_superuser %}
      <div class="d-flex justify-content-start">
        <!-- add new batch modal trigger -->
        <img src="{% static 'main/images/plus.png' %}" alt="add-record" class="plus-btn mb-2" type="button" data-toggle="modal" data-target="#AddBatchModal">
      </div>
    {% endif %}

    <div class="course-list px-5 py-3 d-flex">
      {% for batch in batches %}
      <div class="card course-card m-2 shadow">
        <div class="card-body">
            <h3 class="card-title text-center">{{batch.batch_no}}</h3>
            <h5 class="card-title text-center">{{batch.session}}</h5>
            <h6 class="card-title">Semesters:</h6>
            <div class="d-flex">
              {% for semester in batch.semesters %}
                {% if semester.batch_no == batch.batch_no  %}
                  <div class="semester-circle mx-1 bg-secondary float-left d-flex justify-content-center align-items-center">
                    <a href="semesters/{{semester.batch_no}}/{{semester.semester_no}}" class="text-light">{{semester.semester_no}}</a>
                  </div>
                {% endif %}
              {% endfor %}
              {% if request.user.is_superuser and batch.semesters|length < 8 %}
                <div class="semester-circle mx-2 bg-warning float-left d-flex justify-content-center align-items-center">
                  <a href="add_semester/{{batch.batch_no}}" class="text-light">+</a>
                </div>  
              {% endif %}
            </div>
        </div>
        <div class="d-flex justify-content-between pb-3">
          <div class="mx-2 ml-4">
            <p class="special-bg text-dark px-2 py-1 rounded-pill"><b>Students</b></p>
          </div>
          <div class="d-flex justify-content-between">
            <div class="mx-2">
              <img src="{% static 'main/images/edit.png' %}" alt="edit" class="card-icon" type="button" data-toggle="modal" data-target="#">
            </div>
            <div class="mr-4">
              <img src="{% static 'main/images/delete1.png' %}" alt="delete" class="card-icon" type="button" data-toggle="modal" data-target="#">
            </div>
          </div>
      </div>
      </div>
      {% endfor %}
    </div>
  </div>
  <div class="col-5">
    <!-- row 1 : gradesheet generator -->
    <div class="row d-flex justify-content-center align-items-center bg-light border border-primary rounded pb-3">
      <form action="" method="POST"> {% csrf_token %}
        <div class="d-flex justify-content-center mt-5 mb-3">
          <h5 class="bg-primary text-center text-white p-3 rounded-pill">Generate Grade Sheet</h5>
        </div>
        <div class="form-group text-center">
          <label for="reg_no" class="fomr-label"><b>Registration No</b></label>
          <input type="text" name="reg_no" class="form-control rounded-pill">
        </div>
      </form>
    </div>
    <!-- row 2 : teachers badge and plus button -->
    <div class="row d-flex justify-content-between align-items-center">
      <div class="col-8 d-flex justify-content-end mt-5 mb-3">
        <h5 class="bg-primary text-center text-white p-3 rounded-pill col-5">Teachers</h5>
      </div>
      
      {% if request.user.is_superuser %}
      <div class="col-4 d-flex justify-content-end">
        <!-- add new teacher modal trigger -->
        <img src="{% static 'main/images/plus.png' %}" alt="add-teacher" class="plus-btn mb-2" type="button" data-toggle="modal" data-target="#AddTeacherModal">
      </div>
      {% endif %}
    </div>
    <!-- row 3 : teachers list -->
    <div class="">
      {% for teacher in teachers %}
      <div class="p-3 m-2 row shadow">
        <div class="col-8">
          <h5 class="text-primary">{{teacher.name}}</h5>
          <p style="line-height:15px;"><b><i>{{teacher.designation}}, {{teacher.department}}</i></b></p>
          <p style="line-height:15px;"><b><i>{{teacher.institute}}</i></b></p>
        </div>
        <div class="col-4">
          <div class="row d-flex justify-content-center my-1">
            <a class="mx-2" href="/main/courses/{{batch_no}}/{{semester_no}}/{{course.course_type}}/{{course.course_code}}">
              <img src="{% static 'main/images/play-button.png' %}" alt="edit" class="card-icon" type="button">
            </a>
          </div>
          <div class="row d-flex justify-content-center my-1">
            <img src="{% static 'main/images/edit.png' %}" alt="edit" class="card-icon" type="button" data-toggle="modal" data-target="#">
          </div>
          <div class="row d-flex justify-content-center my-1">
            <img src="{% static 'main/images/delete1.png' %}" alt="delete" class="card-icon" type="button" data-toggle="modal" data-target="#">
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</section>

{% endblock %}